from __future__ import annotations

from assistant.router.core import route_text
from assistant.router.types import RouteResult

__all__ = ["route_text", "RouteResult"]

# --- compatibility export: runtime expects `from assistant.router import route` ---
# Keep canonical router in route_text(); expose route() for older runtime code.
try:
    from .core import route_text  # canonical
except Exception:
    try:
        from .text_driver import route_text  # fallback if core layout differs
    except Exception as e:  # pragma: no cover
        route_text = None
        _route_import_error = e

def route(raw: str, **kwargs):
    """
    Backwards-compatible router entrypoint.
    Wraps route_text() so runtime/app.py can import `route`.
    """
    if route_text is None:
        raise ImportError(f"Could not import route_text: {_route_import_error}")
    return route_text(raw, **kwargs)

__all__ = ["route", "route_text"]
